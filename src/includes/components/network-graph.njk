<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

<style>
:root {
    --bg-dark: #0f172a;
    --bg-darker: #0b1220;
    --text-color: #e2e8f0;
    --center-color: #38bdf8;
    --project-color: #6366f1;
    --skill-color: #f59e0b;
}

#graph-container {
    width: 100%;
    height: 650px;
    background: radial-gradient(
        circle at center,
        var(--bg-dark) 0%,
        var(--bg-darker) 100%
    );
    position: relative;
    overflow: hidden;
}

.node circle {
    stroke: #0b1220;
    stroke-width: 2px;
    transition: all 0.2s ease;
}

.node text {
    fill: var(--text-color);
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    font-weight: 400;
    letter-spacing: 0.2px;
    pointer-events: none;
}

.node-center text {
    font-size: 16px;
    font-weight: 600;
}

.link {
    fill: none;
    stroke-width: 1.5px;
    stroke-opacity: 0.3;
}

.legend {
    position: absolute;
    top: 20px;
    right: 30px;
    font-family: 'Inter', sans-serif;
    font-size: 13px;
    color: #94a3b8;
}

.legend-item {
    display: flex;
    align-items: center;
    margin-bottom: 6px;
}

.legend-dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    margin-right: 8px;
}
</style>

<div id="graph-container">
    <svg id="project-network" width="100%" height="100%"></svg>

    <div class="legend">
        <div class="legend-item">
            <div class="legend-dot" style="background:#38bdf8"></div> Core
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background:#6366f1"></div> Projects
        </div>
        <div class="legend-item">
            <div class="legend-dot" style="background:#f59e0b"></div> Skills
        </div>
    </div>
</div>

<script src="https://d3js.org/d3.v7.min.js"></script>

<script>
(function() {

const data = {
    nodes: [
        { id: "Core", label: "Lionel Yelibi", group: "center", url: "/" },

        { id: "Ising", label: "Ising Model", group: "project", url: "/posts/isingmodel/" },
        { id: "Potts", label: "Potts Model", group: "project", url: "/posts/pottsmodel/" },
        { id: "XY", label: "XY Model", group: "project", url: "/posts/xymodel/" },
        { id: "SPC", label: "Super-Paramagnetic Clustering", group: "project", url: "/posts/spc/" },
        { id: "IsingFin", label: "Ising Model in Finance", group: "project", url: "/posts/isingmodel_finance/" },
        { id: "NeurIPS", label: "NeurIPS 2025", group: "project", url: "/posts/neurips2025/" },

        { id: "CompPhysics", label: "Computational Physics", group: "skill" },
        { id: "PhaseTransitions", label: "Phase Transitions", group: "skill" },
        { id: "Topology", label: "Topology", group: "skill" },
        { id: "ML", label: "Machine Learning", group: "skill" },
        { id: "Finance", label: "Quantitative Finance", group: "skill" },
        { id: "ABM", label: "Agent-Based Modeling", group: "skill" },
        { id: "Econophysics", label: "Econophysics", group: "skill" },
        { id: "GraphAnalytics", label: "Graph Analytics", group: "skill" }
    ],
    links: [
        { source: "Core", target: "Ising" },
        { source: "Core", target: "SPC" },
        { source: "Core", target: "IsingFin" },
        { source: "Core", target: "NeurIPS" },

        { source: "Ising", target: "CompPhysics" },
        { source: "Ising", target: "PhaseTransitions" },

        { source: "Potts", target: "Ising" },
        { source: "Potts", target: "PhaseTransitions" },

        { source: "XY", target: "Ising" },
        { source: "XY", target: "Topology" },

        { source: "SPC", target: "ML" },
        { source: "SPC", target: "GraphAnalytics" },

        { source: "IsingFin", target: "Finance" },
        { source: "IsingFin", target: "Econophysics" },
        { source: "IsingFin", target: "ABM" },

        { source: "NeurIPS", target: "ML" }
    ]
};

const svg = d3.select("#project-network");
const width = svg.node().clientWidth;
const height = svg.node().clientHeight;
const centerX = width / 2;
const centerY = height / 2;

const defs = svg.append("defs");

const gradient = defs.append("linearGradient")
    .attr("id", "link-gradient")
    .attr("gradientUnits", "userSpaceOnUse");

gradient.append("stop")
    .attr("offset", "0%")
    .attr("stop-color", "#6366f1")
    .attr("stop-opacity", 0.4);

gradient.append("stop")
    .attr("offset", "100%")
    .attr("stop-color", "#38bdf8")
    .attr("stop-opacity", 0.4);

const simulation = d3.forceSimulation(data.nodes)
    .force("link", d3.forceLink(data.links).id(d => d.id).distance(120))
    .force("charge", d3.forceManyBody().strength(-200))
    .force("center", d3.forceCenter(centerX, centerY))
    .force("radial", d3.forceRadial(d => {
        if (d.group === "center") return 0;
        if (d.group === "project") return 170;
        return 300;
    }, centerX, centerY).strength(1));

const link = svg.append("g")
    .selectAll("path")
    .data(data.links)
    .join("path")
    .attr("class", "link")
    .attr("stroke", "url(#link-gradient)");

const node = svg.append("g")
    .selectAll(".node")
    .data(data.nodes)
    .join("g")
    .attr("class", d => `node node-${d.group}`)
    .on("click", (e, d) => {
        if (d.url) window.location.href = d.url;
    });

node.append("circle")
    .attr("r", d => d.group === "center" ? 24 : d.group === "project" ? 14 : 9)
    .attr("fill", d => {
        if (d.group === "center") return "#38bdf8";
        if (d.group === "project") return "#6366f1";
        return "#f59e0b";
    });

node.append("text")
    .text(d => d.label)
    .attr("dx", d => d.group === "center" ? 32 : 18)
    .attr("dy", 4);

simulation.on("tick", () => {

    link.attr("d", d => {
        const dx = d.target.x - d.source.x;
        const dy = d.target.y - d.source.y;
        const dr = Math.sqrt(dx * dx + dy * dy) * 0.25;
        return `M${d.source.x},${d.source.y}
                A${dr},${dr} 0 0,1 ${d.target.x},${d.target.y}`;
    });

    node.attr("transform", d => `translate(${d.x},${d.y})`);
});

node.on("mouseover", function(e, d) {
    d3.select(this).select("circle")
        .transition()
        .duration(150)
        .attr("r", function() {
            const base = d.group === "center" ? 24 :
                         d.group === "project" ? 14 : 9;
            return base * 1.15;
        });
}).on("mouseout", function(e, d) {
    d3.select(this).select("circle")
        .transition()
        .duration(150)
        .attr("r", d.group === "center" ? 24 :
                   d.group === "project" ? 14 : 9);
});

})();
</script>
